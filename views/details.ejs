<link rel="stylesheet" href="<%=obj.css %>">
<script src="https://kit.fontawesome.com/ea1e76dc8a.js" crossorigin="anonymous"></script>
<link rel="icon" type="image/x-icon" href="<%=obj.logoImg%>">
<title>Invoice App</title>
<div id="whole-div">
    <div id="nav-div">
        <img id="logoImg" src="<%=obj.logoImg%>" alt="">
        <div id="opt-div"> <div id="theme-div"><img id="themeImg" src="<%=obj.moonImg%>" alt=""> </div> <div id="profile-div"> <img id="avatarImg" src="<%=obj.avatarImg%>" alt=""> </div> </div>
    </div>
    <div id="main-div">
        <% for(let i = 0; i < obj.JsonData.length; i++) { %>
            <% if(obj.JsonData[i].id == obj.res.query.id) { %> 
        <div id="main-div1"> <button onclick="previousPage()" id="go-back"> <i class="fa-solid fa-angle-left"></i> &nbsp; Go Back </button> </div> 
        <div id="main-div2">
            <div id="status-div">Status 
                <% if(obj.JsonData[i].status=="paid") { %> 
                    <div class="status statusPaid">• Paid</div>    
                    <% } %>
                    <% if(obj.JsonData[i].status=="pending") { %> 
                        <div class="status statusPending">• Pending</div>    
                    <% } %>
                    <% if(obj.JsonData[i].status=="draft") { %> 
                        <div class="status statusDraft">• Draft</div>    
                    <% } %>
            </div>
            <div id="option-div">
                <button class="opt-button" id="edit-button">edit</button>
                <button class="opt-button" id="delete-button">Delete</button>
                <button data-id="<%= obj.JsonData[i].id %>" class="opt-button" id="paid-button" method="post" onclick="markAsPaid(this)">Mark as Paid</button>
            </div>
        </div>
        <div id="main-div3">
            <div id="sub-div1">
                <div id="child-div1"> <h3 style="color: 888EB0;">#<customerId><%= obj.JsonData[i].id %></customerId> </h3><customerDescription><%= obj.JsonData[i].description %></customerDescription> </div>
                <div id="child-div2">
                    <street><%= obj.JsonData[i].senderAddress.street %></street>
                    <city><%= obj.JsonData[i].senderAddress.city %></city>
                    <postalCode><%= obj.JsonData[i].senderAddress.postCode %></postalCode>
                    <country><%= obj.JsonData[i].senderAddress.country %></country>
                </div>
            </div>
            <div id="sub-div2">
                <div id="child-div3">
                    <div id="invoiceDataDiv">Invoice Date  <invoiceDate> <% let invoicedate = new Date(obj.JsonData[i].createdAt);
                        let newDateString =invoicedate.toLocaleDateString("en-US", { day: 'numeric', month: 'short', year: 'numeric' })%> <%= newDateString %>   </invoiceDate> 
                    </div>
                    <div id="paymentDateDiv">Payment Date  <paymentDate><% let paymentdate = new Date(obj.JsonData[i].paymentDue);
                        let newDateStrings =paymentdate.toLocaleDateString("en-US", { day: 'numeric', month: 'short', year: 'numeric' })%> <%= newDateStrings %></paymentDate> </div>
                </div>
                <div id="child-div4">Bill To
                    <clientName> <%= obj.JsonData[i].clientName %> </clientName>
                    <clientAddress>
                    <clientStreet><%= obj.JsonData[i].clientAddress.street %></clientStreet>
                    <clientCity><%= obj.JsonData[i].clientAddress.city %></clientCity>
                    <clientPostCode><%= obj.JsonData[i].clientAddress.postCode %></clientPostCode>
                    <clientCountry><%= obj.JsonData[i].clientAddress.country %></clientCountry>
                    </clientAddress>
                </div>
                <div id="child-div5">
                    Sent To
                    <clientMail><%= obj.JsonData[i].clientEmail %></clientMail>
                </div>
            </div>
            <div id="sub-div3">
                <div id="child-div6">
                    <div id="item-list">
                        <div id="itemTitle"><div id="item-name">Item Name</div><div id="item-quantity">QTY.</div><div id="item-quantity-price">Price</div> <div id="item-total-price">Total</div> </div>
                        <% for(let j = 0; j < obj.JsonData[i].items.length; j++) { %>
                            <div id="CusitemTitle"><div id="Cusitem-name"> <%= obj.JsonData[i].items[j].name %> </div><div id="Cusitem-quantity"> <%= obj.JsonData[i].items[j].quantity %> </div><div id="Cusitem-quantity-price"> £ <%= obj.JsonData[i].items[j].price %> </div> <div id="Cusitem-total-price"> £ <%= obj.JsonData[i].items[j].total %> </div> </div>
                        <% } %>    
                    </div>

                    <div id="item-Totalprice">Amount Due  <div id="totalAmount-div">£ <%= obj.JsonData[i].total %></div></div>
                </div>
            </div>
        </div>
        <% } %>
        <% } %>
    </div>
</div>

<script src="<%= obj.js %>">
   
</script>

